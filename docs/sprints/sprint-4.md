# Sprint 4: Epic 5 - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏ß‡∏î

**Period:** Dec 2024
**Goal:** Rounds Timeline ‡πÅ‡∏•‡∏∞ Record Winner
**Status:** üîÑ In Progress

---

## Stories

| # | Story | Priority | Points | Status | Progress |
|---|-------|----------|--------|--------|----------|
| 5.1 | ‡πÅ‡∏™‡∏î‡∏á Timeline ‡∏á‡∏ß‡∏î | P0 | 3 | ‚úÖ Done | 100% |
| 5.2 | ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏ß‡∏î | P0 | 2 | ‚úÖ Done | 100% |
| 5.3 | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ | P0 | 5 | ‚úÖ Done | 100% |
| 5.4 | ‡∏á‡∏ß‡∏î‡πÅ‡∏£‡∏Å (‡∏ó‡πâ‡∏≤‡∏ß‡πÅ‡∏ä‡∏£‡πå) | P1 | 2 | ‚úÖ Done | 100% |
| 5.5 | ‡∏á‡∏ß‡∏î‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ | P1 | 2 | ‚úÖ Done | 100% |

**Total Points:** 14 | **Completed:** 14 | **Progress:** 100%

---

## Story Details

### 5.1 ‡πÅ‡∏™‡∏î‡∏á Timeline ‡∏á‡∏ß‡∏î ‚úÖ

| Acceptance Criteria | Status |
|---------------------|--------|
| ‡πÅ‡∏™‡∏î‡∏á Timeline ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (desktop) | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏á‡∏ß‡∏î (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à/‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô/‡∏£‡∏≠) | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) | ‚úÖ |
| ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏ß‡∏î | ‚úÖ |

---

### 5.2 ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏ß‡∏î ‚úÖ

| Acceptance Criteria | Status |
|---------------------|--------|
| ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏•‡∏Ç‡∏á‡∏ß‡∏î | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞ | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á | ‚úÖ |
| ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ) | ‚úÖ |

---

### 5.3 ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ ‚úÖ

| Acceptance Criteria | Status |
|---------------------|--------|
| ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏à‡∏≤‡∏Å dropdown (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏µ‡∏¢) | ‚úÖ |
| ‡∏Å‡∏£‡∏≠‡∏Å‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏π‡∏•) | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á real-time ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö | ‚úÖ |
| Confirmation ‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å | ‚úÖ |
| ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏õ‡∏µ‡∏¢‡πÅ‡∏•‡πâ‡∏ß" | ‚úÖ |
| ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ß‡∏î‡πÄ‡∏õ‡πá‡∏ô "‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à" | ‚úÖ |

---

### 5.4 ‡∏á‡∏ß‡∏î‡πÅ‡∏£‡∏Å (‡∏ó‡πâ‡∏≤‡∏ß‡πÅ‡∏ä‡∏£‡πå) ‚úÖ

| Acceptance Criteria | Status |
|---------------------|--------|
| ‡∏á‡∏ß‡∏î‡πÅ‡∏£‡∏Å‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ = ‡∏ó‡πâ‡∏≤‡∏ß‡πÅ‡∏ä‡∏£‡πå (auto-select) | ‚úÖ |
| ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (= 0) / disabled field | ‚úÖ |
| Admin ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏á‡∏ß‡∏î‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏≠‡∏á‡∏ó‡πâ‡∏≤‡∏ß‡πÅ‡∏ä‡∏£‡πå" | ‚úÖ |

---

### 5.5 ‡∏á‡∏ß‡∏î‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‚úÖ

| Acceptance Criteria | Status |
|---------------------|--------|
| ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß = ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (auto-select) | ‚úÖ |
| ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (= 0) / disabled field | ‚úÖ |
| Admin ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô | ‚úÖ |
| ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏á‡∏ß‡∏î‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ - ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏°" | ‚úÖ |
| ‡∏´‡∏•‡∏±‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‚Üí ‡∏õ‡∏¥‡∏î‡∏ß‡∏á (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ = COMPLETED) | ‚úÖ |

---

## Schema Changes

‡πÉ‡∏ä‡πâ Model ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß:

```prisma
model Round {
  id            Int         @id @default(autoincrement())
  shareGroupId  Int
  roundNumber   Int
  dueDate       DateTime
  winnerId      Int?        // GroupMember who won this round
  winningBid    Float?      // ‡∏¢‡∏≠‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ä‡∏ô‡∏∞
  status        RoundStatus @default(PENDING)
  payoutAmount  Float?      // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö

  shareGroup ShareGroup   @relation(...)
  winner     GroupMember? @relation("RoundWinner", ...)
  deductions Deduction[]
}

enum RoundStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  SKIPPED
}
```

---

## Files Created/Modified

| File | Change |
|------|--------|
| `backend/src/routes/rounds.ts` | **NEW** - Rounds API |
| `backend/src/index.ts` | Added rounds routes |
| `backend/src/routes/dashboard.ts` | Fixed round status queries |
| `backend/src/routes/share-groups.ts` | Fixed member rounds relation |
| `frontend/src/pages/dashboard/ShareGroupDetailPage.tsx` | Added Tabs, Timeline, Record Winner Modal |

---

## API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/rounds/group/:groupId` | Get all rounds for a group |
| GET | `/api/rounds/:id` | Get round detail |
| POST | `/api/rounds/:id/winner` | Record winner |
| POST | `/api/rounds/generate/:groupId` | Generate rounds for a group |

---

## Blockers / Issues

| Issue | Status | Solution |
|-------|--------|----------|
| - | - | - |

---

## Next Sprint

- [ ] Epic 6: ‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô (Deductions)
- [ ] Epic 7: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ß‡∏á (Group Status)

---

*Last updated: Dec 22, 2024*
