# Story 3.3: Step 3 - ตรวจสอบและบันทึก

## Info
| Field | Value |
|-------|-------|
| Epic | 3. สร้างวงแชร์ |
| Priority | P0 |
| Points | 3 (M) |
| Status | ✅ Done |

---

## User Story

```
As a: ท้าวแชร์
I want to: ตรวจสอบข้อมูลก่อนบันทึก
So that: มั่นใจว่าข้อมูลถูกต้อง
```

---

## Acceptance Criteria

- [x] แสดงสรุปข้อมูลทั้งหมด
- [x] แสดงคำเตือน "แก้ไขบางข้อมูลไม่ได้หลังบันทึก"
- [x] ปุ่มย้อนกลับแก้ไข
- [x] ปุ่มบันทึก
- [x] สร้างวงแชร์
- [x] ท้าวแชร์ = คนสร้างวง
- [x] สร้างรายการงวดอัตโนมัติ (จำนวนงวด = maxMembers)
- [x] สามารถแก้ไข scheduledDate ของแต่ละงวดได้
- [x] Redirect ไปหน้าวงที่สร้าง

---

## UI/UX

```
┌─────────────────────────────────────────────────────┐
│  ✅ ตรวจสอบข้อมูล                                   │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                     │
│  ชื่อวง:        วงแชร์พนักงาน มกราคม 2568          │
│  รูปแบบ:        บิทดอกตาม                          │
│  สมาชิก:        10 คน                              │
│  เงินต้น:       2,000 บาท                          │
│  เงินกองกลาง:   20,000 บาท                         │
│  รอบชำระ:       รายเดือน                           │
│  เริ่มต้น:      01/01/2568                         │
│  ค่าดูแลวง:     100 บาท                            │
│                                                     │
│  ⚠️ หลังบันทึกแล้วจะแก้ไขบางข้อมูลไม่ได้           │
│                                                     │
│                      [← ก่อนหน้า] [💾 บันทึก]      │
└─────────────────────────────────────────────────────┘
```

---

## API

```typescript
POST /api/share-groups
{
  "name": "string",
  "type": "BID_INTEREST",
  "maxMembers": 10,
  "principalAmount": 2000,
  "cycleType": "MONTHLY",
  "startDate": "2025-01-01",
  "managementFee": 100,
  "fixedInterest": null
}

// Response
{
  "success": true,
  "data": { ... },
  "message": "สร้างวงแชร์เรียบร้อยแล้ว"
}
```

---

## หลังบันทึก

- สร้าง ShareGroup
- เพิ่ม Host (ท้าวแชร์) = User ที่สร้าง
- สร้างรายการงวด (Rounds) อัตโนมัติ ตามจำนวน maxMembers
  - กำหนด scheduledDate ตาม cycleType และ startDate
  - งวดแรก scheduledDate = startDate
  - งวดถัดไป +1 เดือน (MONTHLY) หรือ +cycleDays วัน (DAILY)
- สถานะ = DRAFT (รอเปิด)
- Redirect ไปหน้าวง

---

## Files

- `backend/src/routes/share-groups.ts` - POST /api/share-groups
- `frontend/src/pages/dashboard/CreateShareGroupPage.tsx` - Step 3 of wizard

---

*v2.0 | Dec 2024*
