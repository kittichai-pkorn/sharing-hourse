# Story 1.1: à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ Tenant (à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ)

## Info
| Field | Value |
|-------|-------|
| Epic | 1. Authentication |
| Priority | P0 |
| Points | 5 (L) |
| Reference | [SUPER_ADMIN_BLUEPRINT.md](../../SUPER_ADMIN_BLUEPRINT.md) |

---

## User Story

```
As a: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸«à¸¡à¹ˆ (à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ)
I want to: à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹€à¸›à¹‡à¸™à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸§à¸‡ (Tenant)
So that: à¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¸§à¸‡à¹à¸Šà¸£à¹Œà¹„à¸”à¹‰
```

---

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Roles                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SUPER_ADMIN  â”‚  à¸ˆà¸±à¸”à¸à¸²à¸£ Platform, Tenants, Plans    â”‚
â”‚  ADMIN        â”‚  à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ - à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸§à¸‡ (Tenant Admin)â”‚
â”‚  USER         â”‚  à¸¥à¸¹à¸à¹à¸Šà¸£à¹Œ - à¸ªà¸¡à¸²à¸Šà¸´à¸à¹ƒà¸™à¸§à¸‡               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Acceptance Criteria

- [ ] à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Tenant (à¸Šà¸·à¹ˆà¸­à¸­à¸‡à¸„à¹Œà¸à¸£/à¸§à¸‡)
- [ ] à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Admin (à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ)
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ Tenant slug à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
- [ ] Validate email/à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¹„à¸¡à¹ˆà¸‹à¹‰à¸³
- [ ] à¸ªà¸–à¸²à¸™à¸°à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ = PENDING (à¸£à¸­ SuperAdmin à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)

---

## UI/UX

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ                                  â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                     â”‚
â”‚  â”€â”€ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸§à¸‡ â”€â”€                                    â”‚
â”‚                                                     â”‚
â”‚  à¸Šà¸·à¹ˆà¸­à¸§à¸‡/à¸­à¸‡à¸„à¹Œà¸à¸£ *                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ à¸§à¸‡à¹à¸Šà¸£à¹Œà¸à¸™à¸±à¸à¸‡à¸²à¸™à¸šà¸£à¸´à¸©à¸±à¸— ABC                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  à¸£à¸«à¸±à¸ªà¸§à¸‡ (auto-generate)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ wong-share-abc                        ğŸ”„    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”€â”€ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ (Admin) â”€â”€                      â”‚
â”‚                                                     â”‚
â”‚  à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥ *                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ *                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 0891234567                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  Email *                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ somchai@email.com                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ *                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  [          à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™          ]                   â”‚
â”‚                                                     â”‚
â”‚  à¸¡à¸µà¸šà¸±à¸à¸Šà¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§? à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API

```typescript
POST /api/auth/register

// Request
{
  // Tenant info
  tenantName: string;
  tenantSlug?: string;  // auto-generate if not provided

  // Admin info
  adminFullName: string;
  adminPhone: string;
  adminEmail: string;
  adminPassword: string;
}

// Response
{
  success: true,
  data: {
    tenant: {
      id: string;
      name: string;
      slug: string;
      status: "PENDING";
    },
    user: {
      id: string;
      fullName: string;
      email: string;
      role: "ADMIN";
    }
  },
  message: "à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ˆà¸²à¸ Admin"
}
```

---

## Database

```prisma
model Tenant {
  id        String       @id @default(cuid())
  name      String
  slug      String       @unique
  status    TenantStatus @default(PENDING)
  createdAt DateTime     @default(now())

  users        User[]
  shareGroups  ShareGroup[]
}

model User {
  id        String   @id @default(cuid())
  tenantId  String
  fullName  String
  phone     String
  email     String   @unique
  password  String
  role      UserRole @default(USER)

  tenant    Tenant   @relation(fields: [tenantId], references: [id])
}

enum TenantStatus {
  PENDING
  ACTIVE
  SUSPENDED
  CANCELLED
}

enum UserRole {
  ADMIN    // à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ
  USER     // à¸¥à¸¹à¸à¹à¸Šà¸£à¹Œ
}
```

---

## Notes

- Tenant = à¸­à¸‡à¸„à¹Œà¸à¸£/à¸à¸¥à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆà¸¡à¸µà¸§à¸‡à¹à¸Šà¸£à¹Œ
- Admin = à¸—à¹‰à¸²à¸§à¹à¸Šà¸£à¹Œ (à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸§à¸‡)
- User = à¸¥à¸¹à¸à¹à¸Šà¸£à¹Œ (à¸ªà¸¡à¸²à¸Šà¸´à¸)
- SuperAdmin à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ Tenant à¸œà¹ˆà¸²à¸™ Super Admin Panel
