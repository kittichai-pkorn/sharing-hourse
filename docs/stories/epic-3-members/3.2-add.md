# Story 3.2: เพิ่มลูกแชร์ลงระบบ

## Info
| Field | Value |
|-------|-------|
| Epic | 4. จัดการลูกแชร์ |
| Priority | P0 |
| Points | 3 (M) |
| Status | ✅ Done |

---

## User Story

```
As a: ท้าวแชร์
I want to: เพิ่มลูกแชร์ลงระบบ
So that: สามารถนำไปใช้ในวงแชร์ต่างๆ ได้
```

---

## ข้อมูลลูกแชร์ (Member)

| ฟิลด์ | บังคับ | คำอธิบาย |
|-------|--------|----------|
| **รหัสลูกแชร์** | Auto | สร้างอัตโนมัติ: A001, A002, A003, ... |
| **ชื่อเล่น** | ใช่ | ชื่อที่ใช้เรียกในวง |
| ที่อยู่ | ไม่ | ที่อยู่ลูกแชร์ |
| เบอร์โทร | ไม่ | เบอร์ติดต่อ |
| ไลน์ไอดี | ไม่ | LINE ID |

> **Note:** ลูกแชร์ในระบบสามารถถูกเพิ่มเข้าหลายวงแชร์ได้

---

## Acceptance Criteria

- [x] Admin เท่านั้นที่เพิ่มได้
- [x] กรอกข้อมูลลูกแชร์ตาม spec
- [x] Validate ชื่อเล่นต้องกรอก
- [x] ลูกแชร์ถูกเก็บในระดับ tenant
- [x] รหัสลูกแชร์สร้างอัตโนมัติ A001, A002, ...
- [x] แสดงข้อความสำเร็จหลังเพิ่ม

---

## UI/UX

```
┌─────────────────────────────────────────────────────┐
│  เพิ่มลูกแชร์                                 [✕]  │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                     │
│  ℹ️ รหัสลูกแชร์จะถูกสร้างอัตโนมัติ (A001, A002, ...)│
│                                                     │
│  ชื่อเล่น *                                        │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ที่อยู่                                           │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  เบอร์โทร                                          │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ไลน์ไอดี                                          │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│                              [ยกเลิก] [เพิ่ม]      │
└─────────────────────────────────────────────────────┘
```

---

## API

```typescript
POST /api/members

// Request
{
  nickname: string;     // required - ชื่อเล่น
  address?: string;     // optional
  phone?: string;       // optional
  lineId?: string;      // optional
}

// Response
{
  success: true,
  data: {
    id: number;
    memberCode: "A001";     // auto-generated
    nickname: string;
    address: string | null;
    phone: string | null;
    lineId: string | null;
  },
  message: "เพิ่มลูกแชร์เรียบร้อยแล้ว"
}
```

---

## Files

- `backend/src/routes/members.ts` - POST /api/members
- `frontend/src/pages/dashboard/MembersPage.tsx` - Add Member Modal

---

## Notes

- รหัสลูกแชร์ (memberCode) สร้างอัตโนมัติตามลำดับ A001, A002, A003, ...
- ถ้าลบลูกแชร์ (เช่น A002) แล้วเพิ่มใหม่ จะได้รหัสถัดไป (A004) ไม่ reuse
- ลูกแชร์ในระบบ (Member) ≠ ลูกแชร์ในวง (GroupMember)
- Member คือข้อมูลคนที่อาจเข้าร่วมวงแชร์
- GroupMember คือ Member ที่ถูกเพิ่มเข้าวงแชร์แล้ว
- Member 1 คนสามารถเป็น GroupMember ในหลายวงได้

---

*v3.0 | Dec 2024 - ปรับให้ตรงกับ HOW_TO_PLAY.md (ใช้ชื่อเล่นแทนชื่อ-นามสกุล)*
