# Story 4.2: เพิ่มสมาชิกเข้าวงแชร์

## Info
| Field | Value |
|-------|-------|
| Epic | 4. จัดการสมาชิก |
| Priority | P0 |
| Points | 3 (M) |
| Status | ✅ Done |

---

## User Story

```
As a: ท้าวแชร์
I want to: เพิ่มสมาชิกเข้าวงแชร์
So that: มีลูกแชร์ครบตามจำนวนที่กำหนด
```

---

## ข้อมูลสมาชิก (GroupMember)

| ฟิลด์ | บังคับ | คำอธิบาย |
|-------|--------|----------|
| **รหัสลูกแชร์** | Auto | สร้างอัตโนมัติ: A, B, C, ... Z, AA, AB, ... |
| **ชื่อเล่น** | ใช่ | ชื่อที่ใช้เรียกในวง |
| ที่อยู่ | ไม่ | ที่อยู่ลูกแชร์ |
| เบอร์โทร | ไม่ | เบอร์ติดต่อ |
| ไลน์ไอดี | ไม่ | LINE ID |

> **Note:** สมาชิกวงแชร์ไม่สามารถ login เข้าระบบได้ (ท้าวแชร์จัดการให้)

---

## Acceptance Criteria

- [x] Admin เท่านั้นที่เพิ่มได้
- [x] กรอกข้อมูลสมาชิกตาม spec
- [x] รหัสลูกแชร์สร้างอัตโนมัติ (A, B, C, ...)
- [x] ไม่ให้เพิ่มเกินจำนวนที่กำหนด (maxMembers)
- [x] แสดงข้อความ error ถ้าเกิน

---

## UI/UX

```
┌─────────────────────────────────────────────────────┐
│  เพิ่มสมาชิก                                  [✕]  │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                     │
│  ℹ️ รหัสลูกแชร์จะถูกสร้างอัตโนมัติ (A, B, C, ...)  │
│                                                     │
│  ชื่อเล่น *                                        │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  เบอร์โทร                                          │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ไลน์ไอดี                                          │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ที่อยู่                                           │
│  ┌─────────────────────────────────────────────┐   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│                              [ยกเลิก] [เพิ่ม]      │
└─────────────────────────────────────────────────────┘
```

---

## API

```typescript
POST /api/members/group/:groupId

// Request
{
  nickname: string;      // required
  phone?: string;        // optional
  lineId?: string;       // optional
  address?: string;      // optional
}

// Response
{
  success: true,
  data: {
    id: number;
    memberCode: "A";     // auto-generated
    nickname: string;
    phone: string | null;
    lineId: string | null;
    address: string | null;
  },
  message: "เพิ่มสมาชิกเรียบร้อยแล้ว"
}
```

---

## Files

- `backend/src/routes/members.ts` - POST /api/members/group/:groupId
- `frontend/src/pages/dashboard/ShareGroupDetailPage.tsx` - Add Member Modal

---

## Notes

- รหัสลูกแชร์ (memberCode) สร้างอัตโนมัติตามลำดับ A, B, C, ... Z, AA, AB
- ถ้าลบสมาชิก (เช่น B) แล้วเพิ่มใหม่ จะได้รหัส B (reuse รหัสว่าง)
- สมาชิกวงแชร์ ≠ User account (ไม่สามารถ login ได้)

---

*v2.0 | Dec 2024*
