# ตัวอย่างวงแชร์: STEP_INTEREST (ขั้นบันได)

## 1. ข้อมูลวง

| ฟิลด์ | ค่า |
|-------|-----|
| ประเภท | STEP_INTEREST |
| เงินต้น | 1,000 |
| จำนวนสมาชิก | 5 |
| หักท้าย | 1 งวด |

---

## 2. สมาชิก

| รหัส | ชื่อ | บทบาท | ยอดส่ง/งวด |
|------|------|--------|------------|
| - | ท้าว | ท้าวแชร์ | 0 |
| A | เต้ | ลูกแชร์ | 240 |
| B | เต้ง | ลูกแชร์ | 220 |
| C | ทิม | ลูกแชร์ | 180 |

---

## 3. กฎยอดส่ง

1. **ท้าว** → ไม่ต้องส่งทุกงวด
2. **ลูกแชร์** → ส่งยอดคงที่ตามที่กำหนดทุกงวด (ไม่ว่าจะเปียแล้วหรือยัง)

---

## 4. ตารางงวด

| งวดที่ | ผู้เปีย | เงินต้น | วิธีได้ |
|--------|---------|---------|---------|
| 1 | ท้าว | 1,000 | งวดแรก |
| 2 | เต้ | 1,000 | กำหนดล่วงหน้า |
| 3 | เต้ง | 1,000 | กำหนดล่วงหน้า |
| 4 | ทิม | 1,000 | กำหนดล่วงหน้า |
| 5 | ท้าว | 1,000 | หักท้าย |

---

## 5. ตารางยอดส่งรายคน

> - ท้าวไม่ต้องส่งทุกงวด
> - ลูกแชร์ส่งยอดคงที่ทุกงวด (ไม่เปลี่ยนแม้เปียแล้ว)

| งวดที่ | ท้าว | เต้ | เต้ง | ทิม | รวม |
|--------|------|-----|------|-----|-----|
| 1 | - | 240 | 220 | 180 | 640 |
| 2 | 0 | - | 220 | 180 | 400 |
| 3 | 0 | 240 | - | 180 | 420 |
| 4 | 0 | 240 | 220 | - | 460 |
| 5 | 0 | 240 | 220 | 180 | 640 |
| **รวม** | **0** | **960** | **880** | **720** | **2,560** |

> หมายเหตุ: "-" = ผู้เปียงวดนั้น (ไม่ต้องส่ง)

---

## 6. สูตรคำนวณ

```
ยอดรับ = ยอดรวมที่เก็บได้ - ยอดหักท้าย(ตัวเอง)
```

---

## 7. การคำนวณยอดรับ

| งวด | ผู้รับ | เงินกองกลาง | หักท้าย | ยอดรับ |
|-----|--------|-------------|---------|--------|
| 1 | ท้าว | 640 | 0 | 640 |
| 2 | เต้ | 400 | 240 | 160 |
| 3 | เต้ง | 420 | 220 | 200 |
| 4 | ทิม | 460 | 180 | 280 |
| 5 | ท้าว | 640 | 0 | 640 |

---

## 8. สรุป

| สมาชิก | จ่ายรวม | รับรวม | กำไร/ขาดทุน |
|--------|---------|--------|-------------|
| ท้าว | 0 | 1,280 | +1,280 |
| เต้ | 960 | 160 | -800 |
| เต้ง | 880 | 200 | -680 |
| ทิม | 720 | 280 | -440 |

> หมายเหตุ:
> - ท้าวได้ 2 งวด (งวดแรก + หักท้าย) = 640 + 640 = 1,280 บาท
> - หักท้ายคือดอกเบี้ยที่หักจากยอดรับของลูกแชร์แต่ละคน

---

## 9. หลักการ

### ผู้เปีย
| งวด | ใครได้ | วิธี |
|-----|--------|------|
| งวดแรก | ท้าว | ได้อัตโนมัติ |
| งวด 2+ | ลูกแชร์ | ท้าวเลือกจาก Dropdown |
| งวดสุดท้าย | ท้าว | หักท้าย (ได้อัตโนมัติ) |

### ยอดส่ง
| สถานะ | ยอดส่ง |
|-------|--------|
| ท้าว | ไม่ต้องส่งทุกงวด |
| ลูกแชร์ | ส่งยอดคงที่ตามที่กำหนด (ไม่เปลี่ยนแม้เปียแล้ว) |

### การกำหนดผู้เปีย

**ใครเลือก:** ท้าวแชร์

**วิธีเลือก:** เลือกจาก Dropdown ในตารางงวด

```
┌─────────────────────────────────────────────────────────────┐
│  ตารางงวด                                                   │
│                                                             │
│  งวด 1: ท้าว (อัตโนมัติ)                                    │
│  งวด 2: [เลือกผู้เปีย ▾]  →  เต้ | เต้ง | ทิม              │
│  งวด 3: [เลือกผู้เปีย ▾]  →  เต้ง | ทิม (เต้เลือกไปแล้ว)   │
│  งวด 4: [เลือกผู้เปีย ▾]  →  ทิม (เหลือคนเดียว)            │
│  งวด 5: ท้าว (หักท้าย - อัตโนมัติ)                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**เงื่อนไข:**
- ต้องเลือกผู้เปียครบทุกงวดก่อนถึงจะเปิดวงได้
- Dropdown แสดงเฉพาะลูกแชร์ที่ยังไม่ได้รับ
- งวดแรกและงวดสุดท้าย (หักท้าย) กำหนดให้ท้าวอัตโนมัติ ไม่ต้องเลือก

**ตัวอย่างขั้นตอน:**

| ขั้นตอน | งวด | ผู้เปีย | ตัวเลือกที่เหลือ |
|---------|-----|---------|-----------------|
| 1 | งวด 1 | ท้าว (อัตโนมัติ) | - |
| 2 | งวด 2 | เลือก "เต้" | เต้ง, ทิม |
| 3 | งวด 3 | เลือก "เต้ง" | ทิม |
| 4 | งวด 4 | เลือก "ทิม" | (ครบแล้ว) |
| 5 | งวด 5 | ท้าว (หักท้าย - อัตโนมัติ) | - |
| 6 | - | **เปิดวงได้** | - |

---

## 10. กรณีเล่นหลายมือ

> สมาชิก 1 คนสามารถลงได้หลายมือในวงเดียวกัน แต่ละมือคิดแยกกัน

### ตัวอย่าง: เต้เล่น 2 มือ

| มือ | งวดที่เปีย | ยอดส่ง/งวด | หักท้าย |
|-----|-----------|------------|---------|
| เต้#1 | งวด 2 | 240 | 240 |
| เต้#2 | งวด 3 | 200 | 200 |

### ตารางยอดส่งของเต้ (2 มือ)

| งวดที่ | เต้#1 | เต้#2 | รวมเต้ |
|--------|-------|-------|--------|
| 1 | 240 | 200 | 440 |
| 2 | - | 200 | 200 |
| 3 | 240 | - | 240 |
| 4 | 240 | 200 | 440 |
| 5 | 240 | 200 | 440 |
| **รวม** | **960** | **800** | **1,760** |

### หลักการหลายมือ

| หัวข้อ | รายละเอียด |
|--------|------------|
| การส่ง | แต่ละมือส่งแยกกัน (ยอดส่งต่างกันได้) |
| หักท้าย | คิดตามยอดส่งของแต่ละมือ |
| ยอดรับ | แต่ละมือรับแยกกัน |

---

*v1.2 | Dec 2024*
