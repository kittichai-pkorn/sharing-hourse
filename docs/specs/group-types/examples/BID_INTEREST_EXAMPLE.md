# ตัวอย่างวงแชร์: BID_INTEREST (บิทดอกตาม)

## 1. ข้อมูลวง

| ฟิลด์ | ค่า |
|-------|-----|
| ประเภท | BID_INTEREST |
| เงินต้น | 1,000 |
| ส่งต่องวด | 200 |
| จำนวนสมาชิก | 5 |
| ค่าดูแลวง | 50 |

---

## 2. สมาชิก

| รหัส | ชื่อ | บทบาท |
|------|------|--------|
| - | ท้าว | ท้าวแชร์ |
| A | แดง | ลูกแชร์ |
| B | ดำ | ลูกแชร์ |
| C | ขาว | ลูกแชร์ |
| D | เขียว | ลูกแชร์ |

---

## 3. กฎยอดส่ง

1. **ท้าว** → ไม่ต้องส่งทุกงวด
2. **ลูกแชร์ยังไม่เปีย** → ส่ง = ส่งต่องวด (200)
3. **ลูกแชร์เปียแล้ว** → ส่ง = ส่งต่องวด + ดอกเปีย (เช่น 200 + 100 = 300)

---

## 4. ตารางงวด

| งวดที่ | ผู้เปีย | วิธีได้ | ดอกประมูล | ค่าดูแล |
|--------|---------|---------|-----------|---------|
| 1 | ท้าว | งวดแรก | 0 | 50 |
| 2 | แดง | ประมูล 100 | 100 | 50 |
| 3 | ดำ | ประมูล 80 | 80 | 50 |
| 4 | ขาว | ประมูล 50 | 50 | 50 |
| 5 | เขียว | งวดสุดท้าย | 0 | 50 |

---

## 5. ตารางยอดส่งรายคน

> - ท้าวไม่ต้องส่งทุกงวด
> - ลูกแชร์หลังเปียแล้ว ยอดส่งจะเพิ่มเป็น ส่งต่องวด + ดอกเปีย

| งวดที่ | ท้าว | แดง | ดำ | ขาว | เขียว | รวม |
|--------|------|-----|-----|------|--------|-----|
| 1 | - | 200 | 200 | 200 | 200 | 800 |
| 2 | 0 | - | 200 | 200 | 200 | 600 |
| 3 | 0 | 300 | - | 200 | 200 | 700 |
| 4 | 0 | 300 | 280 | - | 200 | 780 |
| 5 | 0 | 300 | 280 | 250 | - | 830 |
| **รวม** | **0** | **1,100** | **960** | **850** | **800** | **3,710** |

> หมายเหตุ:
> - "-" = ผู้เปียงวดนั้น (ไม่ต้องส่ง)
> - แดงเปียดอก 100 → หลังเปียส่ง 200+100=300
> - ดำเปียดอก 80 → หลังเปียส่ง 200+80=280
> - ขาวเปียดอก 50 → หลังเปียส่ง 200+50=250

---

## 6. สูตรคำนวณ

```
ยอดรับ = ยอดรวมที่เก็บได้ - ดอกประมูล - ค่าดูแลวง
```

---

## 7. การคำนวณยอดรับ

| งวด | ผู้รับ | เงินกองกลาง | ดอกประมูล | ค่าดูแล | ยอดรับ |
|-----|--------|-------------|-----------|---------|--------|
| 1 | ท้าว | 800 | 0 | 50 | 750 |
| 2 | แดง | 600 | 100 | 50 | 450 |
| 3 | ดำ | 700 | 80 | 50 | 570 |
| 4 | ขาว | 780 | 50 | 50 | 680 |
| 5 | เขียว | 830 | 0 | 50 | 780 |

---

## 8. สรุป

| สมาชิก | จ่ายรวม | รับรวม | กำไร/ขาดทุน |
|--------|---------|--------|-------------|
| ท้าว | 0 | 750 | +750 |
| แดง | 1,100 | 450 | -650 |
| ดำ | 960 | 570 | -390 |
| ขาว | 850 | 680 | -170 |
| เขียว | 800 | 780 | -20 |

> หมายเหตุ:
> - ดอกประมูลรวม = 0 + 100 + 80 + 50 + 0 = 230 บาท → ตกเป็นของท้าว
> - ค่าดูแลรวม = 50 × 5 = 250 บาท → ตกเป็นของท้าว
> - รายได้ท้าวจริง = 750 + 230 + 250 = 1,230 บาท

---

## 9. หลักการ

### ผู้เปีย
| งวด | ใครได้ | วิธี |
|-----|--------|------|
| งวดแรก | ท้าว | ได้อัตโนมัติ |
| งวด 2+ | ลูกแชร์ | ประมูลดอก (ให้สูงสุดชนะ) |
| งวดสุดท้าย | คนที่เหลือ | ได้อัตโนมัติ |

### ยอดส่ง
| สถานะ | ยอดส่ง |
|-------|--------|
| ท้าว | ไม่ต้องส่งทุกงวด |
| ลูกแชร์ยังไม่เปีย | ส่งต่องวด |
| ลูกแชร์เปียแล้ว | ส่งต่องวด + ดอกเปีย |

### การกำหนดผู้เปีย (ประมูล)

**วิธีการ:** ลูกแชร์ที่ยังไม่เปียประมูลดอก → **คนให้ดอกสูงสุดชนะ**

**ขั้นตอนการประมูล:**

```
┌─────────────────────────────────────────────────────────────┐
│  งวด 2 - ประมูล                                             │
│                                                             │
│  ลูกแชร์ที่ประมูลได้:                                        │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ แดง     ดอก: [100] บาท                              │   │
│  │ ดำ      ดอก: [80 ] บาท                              │   │
│  │ ขาว     ดอก: [50 ] บาท                              │   │
│  │ เขียว   ดอก: [70 ] บาท                              │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ผู้ชนะ: แดง (ดอกสูงสุด 100 บาท)         [บันทึกผู้ชนะ]    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Flow การทำงาน:**

| ขั้นตอน | การกระทำ | ผู้ดำเนินการ |
|---------|----------|--------------|
| 1 | เปิดรับประมูลงวดนั้น | ท้าว |
| 2 | ลูกแชร์กรอกยอดดอกที่ต้องการ | ลูกแชร์ |
| 3 | ท้าวปิดรับประมูล | ท้าว |
| 4 | ระบบหาผู้ชนะ (ดอกสูงสุด) | ระบบ |
| 5 | ท้าวยืนยันผู้ชนะ | ท้าว |

**กรณีดอกเท่ากัน:**
- ท้าวเลือกผู้ชนะจากผู้ที่ให้ดอกเท่ากัน
- หรือ ระบบสุ่มอัตโนมัติ

**เงื่อนไข:**
- ลูกแชร์ที่เปียแล้วประมูลไม่ได้
- งวดแรกท้าวได้อัตโนมัติ (ไม่มีประมูล)
- งวดสุดท้ายคนที่เหลือได้อัตโนมัติ (ไม่มีประมูล)
- ไม่ต้องเลือกผู้เปียล่วงหน้า → **เปิดวงได้เลย**

**ตัวอย่างการประมูลแต่ละงวด:**

| งวด | ผู้ประมูลได้ | ดอกที่เสนอ | ผู้ชนะ |
|-----|-------------|------------|--------|
| 1 | - | - | ท้าว (อัตโนมัติ) |
| 2 | แดง, ดำ, ขาว, เขียว | 100, 80, 50, 70 | แดง (100) |
| 3 | ดำ, ขาว, เขียว | 80, 60, 75 | ดำ (80) |
| 4 | ขาว, เขียว | 50, 45 | ขาว (50) |
| 5 | เขียว | - | เขียว (คนสุดท้าย) |

### ข้อจำกัด
- เปียแล้วประมูลไม่ได้อีก

---

## 10. กรณีเล่นหลายมือ

> สมาชิก 1 คนสามารถลงได้หลายมือในวงเดียวกัน แต่ละมือคิดแยกกัน

### ตัวอย่าง: แดงเล่น 2 มือ

| มือ | งวดที่เปีย | ดอกประมูล | ยอดส่งหลังเปีย |
|-----|-----------|-----------|----------------|
| แดง#1 | งวด 2 | 100 | 300 |
| แดง#2 | งวด 4 | 50 | 250 |

### ตารางยอดส่งของแดง (2 มือ)

| งวดที่ | แดง#1 | แดง#2 | รวมแดง |
|--------|-------|-------|--------|
| 1 | 200 | 200 | 400 |
| 2 | - | 200 | 200 |
| 3 | 300 | 200 | 500 |
| 4 | 300 | - | 300 |
| 5 | 300 | 250 | 550 |
| **รวม** | **1,100** | **850** | **1,950** |

### หลักการหลายมือ

| หัวข้อ | รายละเอียด |
|--------|------------|
| การส่ง | แต่ละมือส่งแยกกัน |
| การประมูล | แต่ละมือประมูลแยกกัน |
| ดอกเปีย | คิดตามดอกที่ประมูลได้ของแต่ละมือ |
| ยอดรับ | แต่ละมือรับแยกกัน |

---

*v1.2 | Dec 2024*
