# ตัวอย่างวงแชร์: BID_INTEREST (บิทดอกตาม)

## 1. ข้อมูลวง

| ฟิลด์ | ค่า |
|-------|-----|
| ประเภท | BID_INTEREST |
| เงินต้น | 1,000 |
| ส่งต่องวด | 200 |
| จำนวนสมาชิก | 5 |
| ค่าดูแลวง | 50 |

---

## 2. สมาชิก

| รหัส | ชื่อ | บทบาท |
|------|------|--------|
| - | ท้าว | ท้าวแชร์ |
| A | แดง | ลูกแชร์ |
| B | ดำ | ลูกแชร์ |
| C | ขาว | ลูกแชร์ |
| D | เขียว | ลูกแชร์ |

---

## 3. กฎยอดส่ง

1. **ท้าว** → ไม่ต้องส่งทุกงวด
2. **ลูกแชร์ยังไม่เปีย** → ส่ง = ส่งต่องวด (200)
3. **ลูกแชร์เปียแล้ว** → ส่ง = ส่งต่องวด + ดอกเปีย (เช่น 200 + 100 = 300)

---

## 4. ตารางงวด

| งวดที่ | ผู้เปีย | วิธีได้ | ดอกประมูล | ค่าดูแล |
|--------|---------|---------|-----------|---------|
| 1 | ท้าว | งวดแรก | 0 | 50 |
| 2 | แดง | ประมูล 100 | 100 | 50 |
| 3 | ดำ | ประมูล 80 | 80 | 50 |
| 4 | ขาว | ประมูล 50 | 50 | 50 |
| 5 | เขียว | งวดสุดท้าย | 0 | 50 |

---

## 5. ตารางยอดส่งรายคน

> - ท้าวไม่ต้องส่งทุกงวด
> - ลูกแชร์หลังเปียแล้ว ยอดส่งจะเพิ่มเป็น ส่งต่องวด + ดอกเปีย

| งวดที่ | ท้าว | แดง | ดำ | ขาว | เขียว | รวม |
|--------|------|-----|-----|------|--------|-----|
| 1 | - | 200 | 200 | 200 | 200 | 800 |
| 2 | 0 | - | 200 | 200 | 200 | 600 |
| 3 | 0 | 300 | - | 200 | 200 | 700 |
| 4 | 0 | 300 | 280 | - | 200 | 780 |
| 5 | 0 | 300 | 280 | 250 | - | 830 |
| **รวม** | **0** | **1,100** | **960** | **850** | **800** | **3,710** |

> หมายเหตุ:
> - "-" = ผู้เปียงวดนั้น (ไม่ต้องส่ง)
> - แดงเปียดอก 100 → หลังเปียส่ง 200+100=300
> - ดำเปียดอก 80 → หลังเปียส่ง 200+80=280
> - ขาวเปียดอก 50 → หลังเปียส่ง 200+50=250

---

## 6. สูตรคำนวณ

```
ยอดรับ = ยอดรวมที่เก็บได้ - ดอกประมูล - ค่าดูแลวง
```

---

## 7. การคำนวณยอดรับ

| งวด | ผู้รับ | เงินกองกลาง | ดอกประมูล | ค่าดูแล | ยอดรับ |
|-----|--------|-------------|-----------|---------|--------|
| 1 | ท้าว | 800 | 0 | 50 | 750 |
| 2 | แดง | 600 | 100 | 50 | 450 |
| 3 | ดำ | 700 | 80 | 50 | 570 |
| 4 | ขาว | 780 | 50 | 50 | 680 |
| 5 | เขียว | 830 | 0 | 50 | 780 |

---

## 8. สรุป

| สมาชิก | จ่ายรวม | รับรวม | กำไร/ขาดทุน |
|--------|---------|--------|-------------|
| ท้าว | 0 | 750 | +750 |
| แดง | 1,100 | 450 | -650 |
| ดำ | 960 | 570 | -390 |
| ขาว | 850 | 680 | -170 |
| เขียว | 800 | 780 | -20 |

> หมายเหตุ:
> - ดอกประมูลรวม = 0 + 100 + 80 + 50 + 0 = 230 บาท → ตกเป็นของท้าว
> - ค่าดูแลรวม = 50 × 5 = 250 บาท → ตกเป็นของท้าว
> - รายได้ท้าวจริง = 750 + 230 + 250 = 1,230 บาท

---

## 9. หลักการ

### ผู้เปีย
| งวด | ใครได้ | วิธี |
|-----|--------|------|
| งวดแรก | ท้าว | ได้อัตโนมัติ |
| งวด 2+ | ลูกแชร์ | ท้าวเลือกจาก Dropdown |
| งวดสุดท้าย | คนที่เหลือ | ได้อัตโนมัติ |

### ยอดส่ง
| สถานะ | ยอดส่ง |
|-------|--------|
| ท้าว | ไม่ต้องส่งทุกงวด |
| ลูกแชร์ยังไม่เปีย | ส่งต่องวด |
| ลูกแชร์เปียแล้ว | ส่งต่องวด + ดอกเปีย |

### การกำหนดผู้เปีย

**ใครเลือก:** ท้าวแชร์

**วิธีเลือก:** เลือกจาก Dropdown ในตารางงวด

```
┌─────────────────────────────────────────────────────────────┐
│  ตารางงวด                                                   │
│                                                             │
│  งวด 1: ท้าว (อัตโนมัติ)                                    │
│  งวด 2: [เลือกผู้เปีย ▾]  →  แดง | ดำ | ขาว | เขียว        │
│  งวด 3: [เลือกผู้เปีย ▾]  →  แดง | ดำ | ขาว | เขียว        │
│  งวด 4: [เลือกผู้เปีย ▾]  →  แดง | ดำ | ขาว | เขียว        │
│  งวด 5: [เลือกผู้เปีย ▾]  →  แดง | ดำ | ขาว | เขียว        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**เงื่อนไข:**
- ต้องเลือกผู้เปียครบทุกงวดก่อนถึงจะเปิดวงได้
- Dropdown แสดงลูกแชร์ทุกคน (ไม่กรองออกเมื่อเลือกแล้ว)
- งวดแรกกำหนดให้ท้าวอัตโนมัติ

**ตัวอย่างขั้นตอน:**

| ขั้นตอน | งวด | ผู้เปีย | ตัวเลือก |
|---------|-----|---------|----------|
| 1 | งวด 1 | ท้าว (อัตโนมัติ) | - |
| 2 | งวด 2 | เลือก "แดง" | แดง, ดำ, ขาว, เขียว |
| 3 | งวด 3 | เลือก "ดำ" | แดง, ดำ, ขาว, เขียว |
| 4 | งวด 4 | เลือก "ขาว" | แดง, ดำ, ขาว, เขียว |
| 5 | งวด 5 | เลือก "เขียว" | แดง, ดำ, ขาว, เขียว |
| 6 | - | **เปิดวงได้** | - |

### ดอกเปีย (ดอกประมูล)

> หมายเหตุ: แม้ผู้เปียจะถูกกำหนดล่วงหน้า แต่ดอกเปียยังคงกำหนดได้ตอนบันทึกผลงวด

| งวด | ผู้เปีย | ดอกเปีย | หมายเหตุ |
|-----|---------|---------|----------|
| 1 | ท้าว | 0 | งวดแรกไม่มีดอก |
| 2 | แดง | 100 | กำหนดตอนบันทึกผล |
| 3 | ดำ | 80 | กำหนดตอนบันทึกผล |
| 4 | ขาว | 50 | กำหนดตอนบันทึกผล |
| 5 | เขียว | 0 | งวดสุดท้ายไม่มีดอก |

### ข้อจำกัด
- ลูกแชร์ 1 คน สามารถเปียได้หลายงวด (กรณีเล่นหลายมือ)

---

## 10. กรณีเล่นหลายมือ

> สมาชิก 1 คนสามารถลงได้หลายมือในวงเดียวกัน แต่ละมือคิดแยกกัน

### ตัวอย่าง: แดงเล่น 2 มือ

| มือ | งวดที่เปีย | ดอกเปีย | ยอดส่งหลังเปีย |
|-----|-----------|---------|----------------|
| แดง#1 | งวด 2 | 100 | 300 |
| แดง#2 | งวด 4 | 50 | 250 |

### ตารางยอดส่งของแดง (2 มือ)

| งวดที่ | แดง#1 | แดง#2 | รวมแดง |
|--------|-------|-------|--------|
| 1 | 200 | 200 | 400 |
| 2 | - | 200 | 200 |
| 3 | 300 | 200 | 500 |
| 4 | 300 | - | 300 |
| 5 | 300 | 250 | 550 |
| **รวม** | **1,100** | **850** | **1,950** |

### หลักการหลายมือ

| หัวข้อ | รายละเอียด |
|--------|------------|
| การส่ง | แต่ละมือส่งแยกกัน |
| ดอกเปีย | คิดตามดอกเปียของแต่ละมือ |
| ยอดรับ | แต่ละมือรับแยกกัน |

---

*v1.3 | Dec 2024*
